/* ══════════════════════════════════════════════════════════
   Design System Agent — Metafore-Styled UI
   ══════════════════════════════════════════════════════════ */

/* ── Metafore Design Tokens ── */
:root {
  --bg: #0A0D12;
  --bg-sidebar: #0e1117;
  --bg-chat: #131720;
  --bg-input: #1a1f2e;
  --bg-hover: #1e2433;
  --bg-active: #252B37;
  --bg-code: #0e1219;
  --bg-right: #0e1117;

  --surface: #181D27;
  --surface-hover: #1e2433;
  --surface-active: #252B37;

  --border: #2e3445;
  --border-light: #1e2433;
  --border-focus: #7F56D9;

  --text: #FAFAFA;
  --text-secondary: #A4A7AE;
  --text-muted: #717680;
  --text-placeholder: #535862;

  --accent: #7F56D9;
  --accent-hover: #9E77ED;
  --accent-muted: rgba(127, 86, 217, 0.14);
  --accent-glow: rgba(127, 86, 217, 0.28);
  --accent-subtle: rgba(127, 86, 217, 0.08);

  --green: #17B26A;
  --green-muted: rgba(23, 178, 106, 0.12);
  --red: #F04438;
  --red-muted: rgba(240, 68, 56, 0.12);
  --orange: #F79009;
  --orange-muted: rgba(247, 144, 9, 0.12);

  --radius: 10px;
  --radius-sm: 6px;
  --radius-lg: 12px;
  --radius-xl: 16px;

  --shadow-xs: 0 1px 2px rgba(10, 13, 18, 0.05);
  --shadow: 0 1px 3px rgba(10, 13, 18, 0.1), 0 1px 2px -1px rgba(10, 13, 18, 0.1);
  --shadow-md: 0 4px 6px -1px rgba(10, 13, 18, 0.1), 0 2px 4px -2px rgba(10, 13, 18, 0.06);
  --shadow-lg: 0 12px 16px -4px rgba(10, 13, 18, 0.08), 0 4px 6px -2px rgba(10, 13, 18, 0.03);
  --shadow-xl: 0 20px 24px -4px rgba(10, 13, 18, 0.08), 0 8px 8px -4px rgba(10, 13, 18, 0.03);

  --transition: 0.2s cubic-bezier(0.4, 0, 0.2, 1);
  --transition-fast: 0.15s cubic-bezier(0.4, 0, 0.2, 1);

  --sidebar-w: 260px;
  --right-panel-w: 380px;
  --header-h: 52px;
  --input-max-w: 780px;
  --chat-max-w: 780px;

  --font: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
  --font-mono: 'JetBrains Mono', 'Fira Code', 'Cascadia Code', ui-monospace, monospace;
}

/* ── Reset ── */
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
html, body { height: 100%; overflow: hidden; }
body {
  font-family: var(--font);
  background: var(--bg);
  color: var(--text);
  line-height: 1.6;
  -webkit-font-smoothing: antialiased;
  transition: background 0.3s ease, color 0.3s ease;
}
#root { height: 100%; }

/* ══════════════════════════════════════
   Layout: Sidebar | Chat | Right Panel
   ══════════════════════════════════════ */

.app-layout {
  display: flex;
  height: 100%;
  overflow: hidden;
}

/* ── Sidebar ── */
.sidebar {
  width: var(--sidebar-w);
  min-width: var(--sidebar-w);
  background: linear-gradient(180deg, #0e1117 0%, #0A0D12 100%);
  display: flex;
  flex-direction: column;
  border-right: 1px solid var(--border-light);
  transition: transform var(--transition), width var(--transition), min-width var(--transition), background 0.3s ease;
  overflow: hidden;
  z-index: 50;
}

.sidebar-header { padding: 10px; flex-shrink: 0; }

/* Library selector */
.library-selector {
  padding: 8px 10px 12px; flex-shrink: 0;
  border-bottom: 1px solid var(--border-light);
}
.library-selector-label {
  font-size: 9.5px; font-weight: 600; text-transform: uppercase;
  letter-spacing: 0.08em; color: var(--text-muted); margin-bottom: 7px;
}
.library-selector-btns {
  display: flex; gap: 2px; padding: 3px;
  background: rgba(10, 13, 18, 0.6); border-radius: var(--radius-sm);
  border: 1px solid var(--border-light);
}
.library-btn {
  flex: 1; padding: 6px 4px; border: none; border-radius: 5px;
  background: transparent; color: var(--text-muted); font-size: 10.5px;
  font-weight: 500; font-family: var(--font); cursor: pointer;
  transition: all var(--transition-fast); white-space: nowrap;
}
.library-btn:hover { color: var(--text-secondary); background: var(--bg-hover); }
.library-btn.active {
  background: linear-gradient(135deg, #6941C6 0%, #7F56D9 100%);
  color: #fff; box-shadow: 0 2px 8px rgba(127, 86, 217, 0.3);
}

.new-chat-btn {
  display: flex; align-items: center; gap: 10px; width: 100%;
  padding: 10px 14px; border: 1px solid var(--border); border-radius: var(--radius);
  background: var(--accent-subtle); color: var(--text); font-family: var(--font);
  font-size: 13px; font-weight: 500; cursor: pointer;
  transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
}
.new-chat-btn:hover {
  background: var(--accent-muted); border-color: var(--accent);
  box-shadow: 0 2px 12px rgba(127, 86, 217, 0.12);
  transform: translateY(-1px);
}
.new-chat-btn:active { transform: translateY(0); }
.new-chat-btn svg { width: 16px; height: 16px; flex-shrink: 0; }

.conversations-list {
  flex: 1; overflow-y: auto; overflow-x: hidden; padding: 6px 8px;
  scrollbar-width: thin; scrollbar-color: var(--border) transparent;
}
.conversations-list::-webkit-scrollbar { width: 4px; }
.conversations-list::-webkit-scrollbar-track { background: transparent; }
.conversations-list::-webkit-scrollbar-thumb { background: var(--border); border-radius: 4px; }

.conv-group-label {
  padding: 10px 8px 4px; font-size: 10px; font-weight: 600;
  color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.06em;
}

.conv-item {
  display: flex; align-items: center; gap: 6px; width: 100%;
  padding: 9px 10px; border: none; border-radius: var(--radius);
  background: transparent; color: var(--text-secondary); font-family: var(--font);
  font-size: 12.5px; cursor: pointer; text-align: left;
  transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative; overflow: hidden;
  border-left: 2px solid transparent;
}
.conv-item:hover { background: var(--bg-hover); color: var(--text); transform: translateX(2px); }
.conv-item.active {
  background: var(--accent-muted); color: var(--text);
  border-left-color: var(--accent);
  box-shadow: 0 1px 4px rgba(127, 86, 217, 0.08);
}

.conv-item-title { flex: 1; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; min-width: 0; }

.conv-item-delete {
  opacity: 0; width: 24px; height: 24px; border: none; border-radius: 5px;
  background: transparent; color: var(--text-muted); cursor: pointer;
  display: flex; align-items: center; justify-content: center; flex-shrink: 0;
  transition: opacity var(--transition-fast), background var(--transition-fast), color var(--transition-fast);
}
.conv-item:hover .conv-item-delete { opacity: 1; }
.conv-item-delete:hover { background: var(--red-muted); color: var(--red); }

.sidebar-footer {
  padding: 12px; flex-shrink: 0;
  border-top: 1px solid var(--border-light);
  background: linear-gradient(180deg, transparent 0%, rgba(127, 86, 217, 0.03) 100%);
}
.sidebar-footer-info { font-size: 11px; color: var(--text-muted); text-align: center; line-height: 1.4; }
.sidebar-footer-info span { color: var(--accent-hover); font-weight: 600; }

/* ── Main Chat Area ── */
.chat-main {
  flex: 1; display: flex; flex-direction: column;
  min-width: 0; height: 100%; overflow: hidden;
  background: linear-gradient(180deg, #131720 0%, #0f1319 100%);
  transition: background 0.3s ease;
}

.chat-header {
  height: var(--header-h); min-height: var(--header-h);
  display: flex; align-items: center; padding: 0 14px; gap: 8px;
  border-bottom: 1px solid var(--border-light);
  background: rgba(19, 23, 32, 0.85);
  backdrop-filter: blur(12px);
  z-index: 10;
}

.sidebar-toggle-btn, .right-panel-toggle-btn {
  width: 36px; height: 36px; border: none; border-radius: var(--radius-sm);
  background: transparent; color: var(--text-secondary); cursor: pointer;
  display: flex; align-items: center; justify-content: center;
  transition: all var(--transition-fast); flex-shrink: 0;
}
.sidebar-toggle-btn:hover, .right-panel-toggle-btn:hover {
  background: var(--bg-hover); color: var(--text);
}
.sidebar-toggle-btn svg, .right-panel-toggle-btn svg { width: 18px; height: 18px; }

.header-title {
  flex: 1; text-align: center; font-size: 14px; font-weight: 600;
  color: var(--text); letter-spacing: -0.015em;
}

.header-model-badge {
  font-size: 10px; padding: 3px 9px; border-radius: 20px;
  background: var(--accent-muted); color: var(--accent-hover); font-weight: 600;
  letter-spacing: 0.01em;
}

/* Messages scroll */
.messages-scroll {
  flex: 1; overflow-y: auto; overflow-x: hidden;
  -webkit-overflow-scrolling: touch; scrollbar-width: thin;
  scrollbar-color: rgba(46, 52, 69, 0.6) transparent; scroll-behavior: smooth;
}
.messages-scroll::-webkit-scrollbar { width: 5px; }
.messages-scroll::-webkit-scrollbar-track { background: transparent; }
.messages-scroll::-webkit-scrollbar-thumb { background: rgba(46, 52, 69, 0.6); border-radius: 4px; }
.messages-scroll::-webkit-scrollbar-thumb:hover { background: var(--text-muted); }

.messages-container {
  max-width: var(--chat-max-w); margin: 0 auto; padding: 20px 24px 0; width: 100%;
}

/* ── Welcome Screen ── */
.welcome-screen {
  display: flex; flex-direction: column; align-items: center;
  justify-content: center; min-height: 100%; padding: 40px 24px;
}
.welcome-logo {
  width: 64px; height: 64px; border-radius: 18px;
  background: linear-gradient(135deg, #6941C6 0%, #9E77ED 50%, #B692F6 100%);
  display: flex; align-items: center; justify-content: center;
  margin-bottom: 24px;
  box-shadow: 0 8px 32px rgba(127, 86, 217, 0.35), 0 0 0 1px rgba(127, 86, 217, 0.15), inset 0 1px 0 rgba(255,255,255,0.15);
  animation: logo-float 4s ease-in-out infinite;
  position: relative;
}
.welcome-logo::after {
  content: ''; position: absolute; inset: -4px; border-radius: 22px;
  background: linear-gradient(135deg, rgba(127, 86, 217, 0.3), transparent, rgba(158, 119, 237, 0.2));
  z-index: -1; filter: blur(8px);
  animation: logo-glow 4s ease-in-out infinite alternate;
}
@keyframes logo-float {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-4px); }
}
@keyframes logo-glow {
  0% { opacity: 0.5; }
  100% { opacity: 1; }
}
.welcome-logo svg { width: 26px; height: 26px; color: white; }
.welcome-title {
  font-size: 26px; font-weight: 700;
  background: linear-gradient(135deg, var(--text) 0%, var(--accent) 100%);
  -webkit-background-clip: text; -webkit-text-fill-color: transparent;
  background-clip: text;
  margin-bottom: 8px; letter-spacing: -0.025em;
}
.welcome-subtitle {
  font-size: 14px; color: var(--text-secondary); margin-bottom: 32px;
  text-align: center; max-width: 440px; line-height: 1.55;
}
.suggestions-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px; max-width: 540px; width: 100%; }
.suggestion-btn {
  display: flex; align-items: flex-start; gap: 10px; padding: 14px 16px;
  border: 1px solid var(--border); border-radius: var(--radius);
  background: var(--surface); color: var(--text-secondary);
  font-family: var(--font); font-size: 12.5px; line-height: 1.45;
  text-align: left; cursor: pointer;
  transition: all var(--transition-fast);
}
.suggestion-btn:hover {
  border-color: rgba(127, 86, 217, 0.4);
  background: rgba(127, 86, 217, 0.06);
  color: var(--text);
  box-shadow: 0 4px 16px rgba(127, 86, 217, 0.12);
  transform: translateY(-2px);
}
.suggestion-btn:active { transform: translateY(0); box-shadow: var(--shadow-xs); }
.suggestion-icon { width: 18px; height: 18px; flex-shrink: 0; color: #9E77ED; margin-top: 1px; transition: transform 0.2s ease; }
.suggestion-btn:hover .suggestion-icon { transform: scale(1.15); }

@media (max-width: 600px) { .suggestions-grid { grid-template-columns: 1fr; } }

/* ══════════════════════════════════════
   Messages
   ══════════════════════════════════════ */

.message {
  display: flex; gap: 14px; padding: 18px 12px; align-items: flex-start;
  border-radius: var(--radius); margin-bottom: 2px;
  transition: background var(--transition-fast);
}
.message + .message { border-top: none; }
.message.user {
  background: rgba(127, 86, 217, 0.04);
  border-left: 2px solid rgba(127, 86, 217, 0.3);
}
.message.assistant {
  background: rgba(23, 178, 106, 0.03);
}

.msg-avatar {
  width: 34px; height: 34px; border-radius: 11px; flex-shrink: 0;
  display: flex; align-items: center; justify-content: center;
  font-size: 12px; font-weight: 600;
  transition: transform 0.2s ease, box-shadow 0.2s ease;
}
.message:hover .msg-avatar { transform: scale(1.05); }
.message.user .msg-avatar {
  background: linear-gradient(135deg, #6941C6 0%, #9E77ED 100%); color: white;
  box-shadow: 0 3px 12px rgba(105, 65, 198, 0.3);
}
.message.assistant .msg-avatar {
  background: linear-gradient(135deg, #079455 0%, #17B26A 100%); color: white;
  box-shadow: 0 3px 12px rgba(7, 148, 85, 0.3);
}
.msg-avatar svg { width: 16px; height: 16px; }

.msg-body { flex: 1; min-width: 0; overflow-wrap: break-word; }
.msg-role { font-size: 11.5px; font-weight: 600; margin-bottom: 4px; color: var(--text); letter-spacing: 0.01em; }

/* ── Inline Preview in Chat ── */
.msg-preview-section {
  margin-top: 12px; border: 1px solid var(--border); border-radius: var(--radius);
  overflow: hidden; background: var(--surface);
  box-shadow: var(--shadow-xs);
}
.msg-preview-header {
  display: flex; align-items: center; justify-content: space-between;
  padding: 7px 12px; background: var(--bg-hover);
  border-bottom: 1px solid var(--border); font-size: 11px;
}
.msg-preview-label { color: var(--text-muted); font-weight: 600; letter-spacing: 0.01em; }
.msg-preview-actions { display: flex; gap: 5px; }
.msg-preview-actions button {
  padding: 3px 8px; border: 1px solid var(--border); border-radius: 5px;
  background: transparent; color: var(--text-secondary); font-size: 11px;
  font-family: var(--font); cursor: pointer;
  transition: background var(--transition-fast), color var(--transition-fast);
}
.msg-preview-actions button:hover { background: var(--accent-muted); color: var(--accent); }
.msg-preview-actions .expand-btn {
  background: rgba(127, 86, 217, 0.12); color: #B692F6;
  border-color: rgba(127, 86, 217, 0.3); font-weight: 600;
}
.msg-preview-actions .expand-btn:hover {
  background: linear-gradient(135deg, #6941C6 0%, #7F56D9 100%);
  color: #fff; border-color: transparent;
}
.msg-preview-iframe {
  width: 100%; height: 260px; border: none; background: #fff; display: block;
}
.msg-preview-fallback {
  padding: 16px; color: var(--text-muted); font-size: 12px; text-align: center;
  min-height: 80px; display: flex; align-items: center; justify-content: center;
}

/* ── Fullscreen Preview Modal ── */
.preview-modal-overlay {
  position: fixed; inset: 0; z-index: 9999;
  background: rgba(0, 0, 0, 0.85); backdrop-filter: blur(4px);
  display: flex; align-items: center; justify-content: center;
  animation: fadeIn 0.15s ease;
}
@keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

.preview-modal {
  width: 96vw; height: 94vh; max-width: 1400px;
  background: var(--bg-chat); border: 1px solid var(--border);
  border-radius: var(--radius); display: flex; flex-direction: column;
  overflow: hidden; box-shadow: 0 24px 80px rgba(0,0,0,0.6);
  animation: modalSlide 0.2s ease;
}
/* Multi-variant modal: go full width for maximum iframe space */
.preview-modal--multi {
  width: 100vw; height: 100vh; max-width: none;
  border-radius: 0; border: none;
}
/* Single variant modal: generous size */
.preview-modal--single {
  width: 96vw; height: 94vh; max-width: 1200px;
}
@keyframes modalSlide { from { opacity: 0; transform: scale(0.96) translateY(10px); } to { opacity: 1; transform: scale(1) translateY(0); } }

.preview-modal-toolbar {
  display: flex; align-items: center; gap: 12px;
  padding: 8px 16px;
  background: linear-gradient(180deg, #0e1117 0%, #131720 100%);
  border-bottom: 1px solid var(--border); flex-shrink: 0;
  min-height: 42px;
}
.preview-modal-title {
  font-size: 13px; font-weight: 600; color: var(--text); margin-right: auto;
}
.preview-modal-viewport-btns {
  display: flex; gap: 4px;
}
.viewport-btn {
  padding: 4px 10px; border: 1px solid var(--border); border-radius: 5px;
  background: transparent; color: var(--text-muted); font-size: 13px;
  cursor: pointer; transition: all var(--transition-fast);
}
.viewport-btn:hover { background: var(--bg-hover); color: var(--text); }
.viewport-btn.active { background: var(--accent-muted); border-color: var(--accent); color: var(--accent); }

.preview-modal-actions {
  display: flex; gap: 6px; align-items: center;
}
.preview-modal-actions button {
  padding: 5px 12px; border: 1px solid var(--border); border-radius: 6px;
  background: var(--surface); color: var(--text-secondary); font-size: 12px;
  font-family: var(--font); cursor: pointer;
  transition: all var(--transition-fast);
}
.preview-modal-actions button:hover { background: var(--accent-muted); color: var(--accent); border-color: var(--accent); }
.preview-modal-close {
  font-size: 16px !important; padding: 4px 10px !important;
  font-weight: 700; line-height: 1;
}
.preview-modal-close:hover { background: var(--red-muted) !important; color: var(--red) !important; border-color: var(--red) !important; }

.preview-modal-viewport-label {
  text-align: center; font-size: 10px; color: var(--text-muted);
  padding: 2px 0; background: var(--bg); border-bottom: 1px solid var(--border-light);
  flex-shrink: 0; line-height: 1.4;
}

.preview-modal-body {
  flex: 1; position: relative; overflow: hidden;
  background: #f5f5f5; min-height: 0;
}
.preview-modal-loading {
  position: absolute; inset: 0; display: flex; align-items: center; justify-content: center;
  color: var(--text-muted); font-size: 14px; z-index: 1;
  background: var(--bg-chat);
}
.preview-modal-iframe-wrap {
  width: 100%; height: 100%;
  transition: max-width 0.3s ease;
}
.preview-modal-iframe {
  width: 100%; height: 100%; border: none; background: #fff; display: block;
  transition: opacity 0.2s ease;
}

/* Multi-variant modal layout */
.preview-modal-multi-body {
  flex: 1; display: flex; overflow: hidden; background: #f5f5f5;
  min-height: 0;
}
.preview-modal-variant-pane {
  flex: 1; display: flex; flex-direction: column; min-width: 0;
  border-right: 2px solid var(--border);
}
.preview-modal-variant-pane:last-child { border-right: none; }
.preview-modal-variant-label {
  display: flex; align-items: center; justify-content: space-between;
  padding: 4px 10px; background: var(--bg-code);
  border-bottom: 1px solid var(--border); font-size: 11px;
  color: var(--accent); font-weight: 600; flex-shrink: 0;
  min-height: 28px;
}
.preview-modal-variant-label span {
  white-space: nowrap; overflow: hidden; text-overflow: ellipsis; min-width: 0;
}
.preview-modal-variant-label button {
  padding: 2px 7px; border: 1px solid var(--border); border-radius: 4px;
  background: transparent; color: var(--text-secondary); font-size: 10px;
  font-family: var(--font); cursor: pointer; flex-shrink: 0;
  transition: all var(--transition-fast);
}
.preview-modal-variant-label button:hover { background: var(--accent-muted); color: var(--accent); }
.preview-modal-variant-iframe-area {
  flex: 1; position: relative; overflow: hidden; min-height: 0;
}
.preview-modal-variant-iframe-area .preview-modal-loading {
  position: absolute; inset: 0;
}
.preview-modal-variant-iframe-area .preview-modal-iframe {
  width: 100%; height: 100%; min-height: 0;
}

/* ── Multi-Preview (side-by-side variants) ── */
.multi-preview-section {
  margin-top: 10px; border: 1px solid var(--border); border-radius: var(--radius);
  overflow: hidden; background: var(--surface);
}
.multi-preview-header {
  display: flex; align-items: center; justify-content: space-between;
  padding: 6px 10px; background: var(--bg-hover);
  border-bottom: 1px solid var(--border); font-size: 11px;
}
.multi-preview-grid {
  display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
  gap: 0;
}
.multi-preview-card {
  border-right: 1px solid var(--border);
  min-width: 0;
  overflow: hidden;
}
.multi-preview-card:last-child { border-right: none; }
.multi-preview-card-label {
  display: flex; align-items: center; justify-content: space-between;
  padding: 3px 8px; background: var(--bg-code); font-size: 11px;
  color: var(--accent); font-weight: 600; border-bottom: 1px solid var(--border-light);
  min-height: 24px;
}
.multi-preview-card-actions { display: flex; gap: 4px; }
.multi-preview-card-label button, .multi-preview-card-actions button {
  padding: 2px 6px; border: 1px solid var(--border); border-radius: 4px;
  background: transparent; color: var(--text-secondary); font-size: 10px;
  font-family: var(--font); cursor: pointer;
  transition: all var(--transition-fast);
}
.multi-preview-card-label button:hover, .multi-preview-card-actions button:hover { background: var(--accent-muted); color: var(--accent); }
.multi-preview-card .msg-preview-section {
  margin-top: 0; border: none; border-radius: 0;
}
.multi-preview-card .msg-preview-header { display: none; }
.multi-preview-card .msg-preview-iframe { height: 300px; }

/* Code used section */
.msg-code-section { border-top: 1px solid var(--border); }
.msg-code-header {
  display: flex; align-items: center; justify-content: space-between;
  padding: 5px 10px; font-size: 11px; color: var(--text-muted);
  cursor: pointer; transition: background var(--transition-fast);
}
.msg-code-header:hover { background: var(--bg-hover); }
.msg-code-header span { font-weight: 500; }
.msg-code-pre {
  margin: 0; padding: 10px 12px; font-family: var(--font-mono); font-size: 11.5px;
  line-height: 1.45; overflow-x: auto; max-height: 200px; overflow-y: auto;
  white-space: pre; color: var(--text); background: #0d1117;
  border-top: 1px solid var(--border-light);
}

/* ── Markdown Content ── */
.markdown-content { font-size: 14px; line-height: 1.7; color: var(--text); letter-spacing: 0.005em; }
.markdown-content p { margin-bottom: 10px; }
.markdown-content p:last-child { margin-bottom: 0; }
.markdown-content h1, .markdown-content h2, .markdown-content h3,
.markdown-content h4, .markdown-content h5, .markdown-content h6 {
  color: var(--text); margin: 16px 0 6px; font-weight: 600; letter-spacing: -0.01em;
}
.markdown-content h1 { font-size: 1.4em; }
.markdown-content h2 { font-size: 1.25em; }
.markdown-content h3 { font-size: 1.1em; }
.markdown-content strong { color: var(--text); font-weight: 600; }
.markdown-content em { font-style: italic; }
.markdown-content a { color: var(--accent); text-decoration: none; }
.markdown-content a:hover { text-decoration: underline; }
.markdown-content ul, .markdown-content ol { margin: 6px 0 10px; padding-left: 22px; }
.markdown-content li { margin-bottom: 3px; }
.markdown-content li > p { margin-bottom: 3px; }
.markdown-content blockquote {
  border-left: 3px solid var(--accent); padding: 6px 14px; margin: 10px 0;
  background: var(--accent-muted); border-radius: 0 var(--radius-sm) var(--radius-sm) 0;
  color: var(--text-secondary);
}
.markdown-content hr { border: none; border-top: 1px solid var(--border); margin: 16px 0; }
.markdown-content table { border-collapse: collapse; width: 100%; margin: 10px 0; font-size: 13px; }
.markdown-content th, .markdown-content td { border: 1px solid var(--border); padding: 6px 10px; text-align: left; }
.markdown-content th { background: var(--surface); font-weight: 600; }
.markdown-content code:not(pre code) {
  background: var(--bg-input); padding: 1px 5px; border-radius: 4px;
  font-family: var(--font-mono); font-size: 0.85em; color: #e8b4b8;
  border: 1px solid var(--border-light);
}

/* Code blocks */
.code-block-wrapper {
  position: relative; margin: 12px 0; border-radius: var(--radius);
  overflow: hidden; border: 1px solid var(--border); background: #0c1017;
  box-shadow: var(--shadow-xs);
}
.code-block-header {
  display: flex; align-items: center; justify-content: space-between;
  padding: 5px 10px; background: #161b22;
  border-bottom: 1px solid var(--border-light); font-size: 11px;
}
.code-lang-label { color: var(--text-muted); font-family: var(--font-mono); font-size: 11px; text-transform: lowercase; }
.copy-code-btn {
  display: flex; align-items: center; gap: 4px; padding: 3px 8px;
  border: none; border-radius: 5px; background: transparent;
  color: var(--text-secondary); font-family: var(--font); font-size: 11px; cursor: pointer;
  transition: background var(--transition-fast), color var(--transition-fast);
}
.copy-code-btn:hover { background: rgba(255,255,255,0.1); color: var(--text); }
.copy-code-btn.copied { color: var(--green); }
.copy-code-btn svg { width: 13px; height: 13px; }
.markdown-content pre {
  margin: 0; padding: 12px; overflow-x: auto; overflow-y: auto;
  max-height: 280px; font-family: var(--font-mono);
  font-size: 12px; line-height: 1.5; background: #0d1117;
  scrollbar-width: thin; scrollbar-color: var(--border) transparent;
}
.markdown-content pre::-webkit-scrollbar { height: 5px; }
.markdown-content pre::-webkit-scrollbar-track { background: transparent; }
.markdown-content pre::-webkit-scrollbar-thumb { background: var(--border); border-radius: 3px; }
.markdown-content pre code { background: none; padding: 0; border: none; font-size: inherit; color: inherit; }

.message.user .msg-content { font-size: 14px; line-height: 1.55; white-space: pre-wrap; color: var(--text); }

/* Pinned context tags on user messages */
.msg-pinned-tags {
  display: flex; align-items: center; gap: 5px; flex-wrap: wrap;
  margin-bottom: 8px;
}
.msg-pinned-icon { font-size: 12px; opacity: 0.7; }
.msg-pinned-tag {
  display: inline-flex; align-items: center; gap: 3px;
  padding: 3px 9px; border-radius: 6px;
  background: rgba(105, 65, 198, 0.12); color: #B692F6;
  font-size: 11px; font-weight: 500; font-family: var(--font-mono);
  border: 1px solid rgba(127, 86, 217, 0.2);
  white-space: nowrap; max-width: 180px; overflow: hidden; text-overflow: ellipsis;
}

/* Streaming cursor */
.streaming-cursor {
  display: inline-block; width: 2px; height: 1em; background: var(--accent);
  margin-left: 2px; vertical-align: text-bottom; animation: blink 1s step-end infinite;
}
@keyframes blink { 0%, 100% { opacity: 1; } 50% { opacity: 0; } }

/* Typing indicator */
.typing-indicator { display: flex; gap: 4px; padding: 6px 0; }
.typing-dot {
  width: 7px; height: 7px; border-radius: 50%; background: var(--text-muted);
  animation: typing 1.4s ease-in-out infinite;
}
.typing-dot:nth-child(2) { animation-delay: 0.2s; }
.typing-dot:nth-child(3) { animation-delay: 0.4s; }
@keyframes typing { 0%, 60%, 100% { transform: translateY(0); opacity: 0.4; } 30% { transform: translateY(-5px); opacity: 1; } }

/* ══════════════════════════════════════
   Input Area
   ══════════════════════════════════════ */

.input-area {
  flex-shrink: 0; padding: 12px 24px 18px;
  background: linear-gradient(180deg, transparent 0%, rgba(10, 13, 18, 0.4) 100%);
}
.input-wrapper { max-width: var(--input-max-w); margin: 0 auto; position: relative; }
.input-box {
  display: flex; align-items: flex-end; gap: 8px;
  padding: 10px 12px 10px 16px;
  background: rgba(26, 31, 46, 0.7);
  backdrop-filter: blur(20px);
  border: 1px solid var(--border); border-radius: var(--radius-xl);
  transition: border-color 0.3s ease, box-shadow 0.3s ease, background 0.3s ease;
  box-shadow: var(--shadow);
}
.input-box:focus-within {
  border-color: var(--accent);
  box-shadow: 0 0 0 3px rgba(127, 86, 217, 0.12), 0 0 24px rgba(127, 86, 217, 0.08), var(--shadow-md);
}
.input-box textarea {
  flex: 1; min-height: 22px; max-height: 180px; padding: 4px 0;
  border: none; background: transparent; color: var(--text);
  font-family: var(--font); font-size: 14px; line-height: 1.45; resize: none; outline: none;
}
.input-box textarea::placeholder { color: var(--text-placeholder); }

.send-btn {
  width: 36px; height: 36px; border: none; border-radius: 50%;
  background: linear-gradient(135deg, #6941C6 0%, #7F56D9 100%);
  color: white; cursor: pointer;
  display: flex; align-items: center; justify-content: center; flex-shrink: 0;
  transition: all var(--transition-fast);
  box-shadow: 0 2px 8px rgba(127, 86, 217, 0.3);
}
.send-btn:hover:not(:disabled) {
  background: linear-gradient(135deg, #7F56D9 0%, #9E77ED 100%);
  box-shadow: 0 4px 18px rgba(127, 86, 217, 0.45);
  transform: scale(1.05);
}
.send-btn:active:not(:disabled) { transform: scale(0.92); }
.send-btn:disabled { opacity: 0.35; cursor: not-allowed; box-shadow: none; }
.send-btn svg { width: 16px; height: 16px; }

.stop-btn {
  width: 36px; height: 36px; border: 2px solid var(--text-secondary); border-radius: 50%;
  background: transparent; color: var(--text-secondary); cursor: pointer;
  display: flex; align-items: center; justify-content: center; flex-shrink: 0;
  transition: all var(--transition-fast);
}
.stop-btn:hover { border-color: var(--red); color: var(--red); }
.stop-btn .stop-icon { width: 11px; height: 11px; background: currentColor; border-radius: 2px; }

.input-hint { text-align: center; font-size: 10.5px; color: var(--text-muted); margin-top: 7px; opacity: 0.7; }

/* Pinned context bar above input */
.pinned-context-bar {
  display: flex; align-items: center; gap: 6px; flex-wrap: wrap;
  padding: 7px 12px; margin-bottom: 8px;
  background: rgba(105, 65, 198, 0.08);
  border: 1px solid rgba(127, 86, 217, 0.2);
  border-radius: var(--radius);
  max-width: var(--input-max-w); margin-left: auto; margin-right: auto;
}
.pinned-context-label {
  font-size: 11px; font-weight: 600; color: #B692F6;
  letter-spacing: 0.02em; white-space: nowrap; margin-right: 2px;
}
.pinned-context-chip {
  display: inline-flex; align-items: center; gap: 4px;
  padding: 3px 9px 3px 7px; border-radius: 6px;
  background: linear-gradient(135deg, #6941C6 0%, #7F56D9 100%);
  color: #fff; font-size: 11px; font-weight: 500;
  font-family: var(--font-mono); white-space: nowrap;
  transition: all var(--transition-fast);
  box-shadow: 0 1px 4px rgba(127, 86, 217, 0.2);
}
.pinned-context-chip:hover { background: linear-gradient(135deg, #7F56D9 0%, #9E77ED 100%); }
.pinned-chip-name { max-width: 140px; overflow: hidden; text-overflow: ellipsis; }
.pinned-chip-remove {
  display: inline-flex; align-items: center; justify-content: center;
  width: 15px; height: 15px; border: none; border-radius: 50%;
  background: rgba(255,255,255,0.2); color: inherit; cursor: pointer;
  font-size: 9px; padding: 0; line-height: 1;
  transition: background var(--transition-fast);
}
.pinned-chip-remove:hover { background: rgba(255,255,255,0.35); }

/* ══════════════════════════════════════
   RIGHT PANEL (Code Files + Features)
   ══════════════════════════════════════ */

.right-panel {
  width: var(--right-panel-w);
  min-width: var(--right-panel-w);
  background: linear-gradient(180deg, #0e1117 0%, #0A0D12 100%);
  border-left: 1px solid var(--border);
  display: flex;
  flex-direction: column;
  overflow: hidden;
  transition: opacity var(--transition), background 0.3s ease;
}

.right-panel.closed {
  width: 0; min-width: 0; border: none; overflow: hidden; opacity: 0; pointer-events: none;
}

/* Resize handle */
.resize-handle {
  width: 5px; min-width: 5px; background: transparent; cursor: col-resize;
  flex-shrink: 0; transition: background var(--transition);
  position: relative; border-left: 1px solid var(--border-light);
}
.resize-handle::after {
  content: ''; position: absolute; top: 50%; left: 50%;
  transform: translate(-50%, -50%);
  width: 2px; height: 32px; border-radius: 2px;
  background: var(--text-muted); opacity: 0;
  transition: opacity var(--transition-fast);
}
.resize-handle:hover { background: rgba(127, 86, 217, 0.15); border-left-color: var(--accent); }
.resize-handle:hover::after { opacity: 0.8; background: var(--accent-hover); }
.resize-handle.hidden { display: none; }

/* ── Code Panel (top half) ── */
.code-panel {
  flex: 1; display: flex; flex-direction: column;
  border-bottom: 1px solid var(--border); min-height: 0; overflow: hidden;
}
.code-panel-header {
  padding: 12px 14px; display: flex; align-items: center;
  justify-content: space-between;
  border-bottom: 1px solid var(--border-light);
  flex-shrink: 0;
  background: linear-gradient(90deg, rgba(127, 86, 217, 0.04) 0%, transparent 100%);
}
.code-panel-header h3 { font-size: 13px; font-weight: 600; color: var(--text); letter-spacing: -0.01em; }
.code-panel-header-actions { display: flex; align-items: center; gap: 6px; }
.code-panel-header .code-count {
  font-size: 10px; padding: 2px 7px; border-radius: 10px;
  background: rgba(127, 86, 217, 0.12); color: #B692F6; font-weight: 600;
}
.code-clear-btn {
  padding: 3px 9px; border: 1px solid var(--border); border-radius: 5px;
  background: transparent; color: var(--text-muted); font-size: 10px;
  font-family: var(--font); cursor: pointer;
  transition: all var(--transition-fast);
}
.code-clear-btn:hover { background: rgba(240, 68, 56, 0.08); color: #F04438; border-color: rgba(240, 68, 56, 0.3); }
.code-panel-body { flex: 1; overflow-y: auto; padding: 8px; min-height: 0; }
.code-panel-body::-webkit-scrollbar { width: 4px; }
.code-panel-body::-webkit-scrollbar-track { background: transparent; }
.code-panel-body::-webkit-scrollbar-thumb { background: var(--border); border-radius: 4px; }

/* Folder grouping */
.code-folder { margin-bottom: 4px; }
.code-folder-header {
  display: flex; align-items: center; gap: 5px; padding: 5px 6px;
  cursor: pointer; border-radius: var(--radius-sm); font-size: 11px;
  color: var(--text-secondary); font-weight: 600; user-select: none;
  transition: background var(--transition-fast);
}
.code-folder-header:hover { background: var(--bg-hover); }
.code-folder-arrow {
  font-size: 8px; transition: transform 0.15s ease; display: inline-block;
}
.code-folder-arrow.collapsed { transform: rotate(-90deg); }
.code-folder-icon { font-size: 13px; }
.code-folder-name { flex: 1; min-width: 0; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
.code-folder-count {
  font-size: 9px; padding: 1px 5px; border-radius: 8px;
  background: var(--bg-hover); color: var(--text-muted); font-weight: 500;
}

.code-file-item {
  display: flex; align-items: center; gap: 8px; width: 100%;
  padding: 8px 10px 8px 20px; border: 1px solid transparent; border-radius: var(--radius);
  background: transparent; color: var(--text-secondary); font-family: var(--font);
  font-size: 12px; cursor: pointer; text-align: left;
  transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
  margin-bottom: 3px; position: relative;
}
.code-file-item:hover {
  background: var(--bg-hover); border-color: var(--border); color: var(--text);
  box-shadow: var(--shadow);
  transform: translateX(2px);
}
.code-file-item.active {
  background: rgba(127, 86, 217, 0.08); border-color: rgba(127, 86, 217, 0.3);
  color: var(--text); box-shadow: 0 2px 8px rgba(127, 86, 217, 0.12);
}
.code-file-icon { color: var(--accent); flex-shrink: 0; }
.code-file-icon svg { width: 14px; height: 14px; }
.code-file-info { flex: 1; min-width: 0; }
.code-file-name { font-weight: 500; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.code-file-meta { display: flex; align-items: center; gap: 6px; font-size: 10px; color: var(--text-muted); margin-top: 1px; }
.code-file-context {
  white-space: nowrap; overflow: hidden; text-overflow: ellipsis; max-width: 120px;
  color: var(--text-muted); opacity: 0.7; font-style: italic;
}
.code-file-actions {
  display: flex; align-items: center; gap: 2px; flex-shrink: 0;
}
.code-file-pin {
  width: 22px; height: 22px; border: none; border-radius: 4px;
  background: transparent; color: var(--text-muted); cursor: pointer;
  font-size: 12px; display: flex; align-items: center; justify-content: center;
  opacity: 0; transition: all var(--transition-fast);
}
.code-file-item:hover .code-file-pin { opacity: 0.6; }
.code-file-pin:hover { opacity: 1 !important; background: var(--accent-muted); color: var(--accent); }
.code-file-pin.pinned {
  opacity: 1; color: var(--accent); filter: none;
}
.code-file-item.pinned { border-left: 2px solid var(--accent); }
.code-file-delete {
  flex-shrink: 0; width: 22px; height: 22px; border: none; border-radius: 4px;
  background: transparent; color: var(--text-muted); cursor: pointer;
  font-size: 11px; display: flex; align-items: center; justify-content: center;
  opacity: 0; transition: all var(--transition-fast);
}
.code-file-item:hover .code-file-delete { opacity: 0.6; }
.code-file-delete:hover { opacity: 1 !important; background: rgba(244,63,94,0.12); color: var(--red); }

/* Pinned section */
.code-pinned-section {
  margin-bottom: 8px; padding-bottom: 8px;
  border-bottom: 1px solid var(--border-light);
}
.code-pinned-header {
  display: flex; align-items: center; gap: 6px;
  padding: 4px 10px; font-size: 11px; font-weight: 600;
  color: var(--accent); letter-spacing: 0.03em;
  text-transform: uppercase;
}
.code-pinned-header .code-folder-count {
  font-size: 9px; padding: 1px 5px; border-radius: 8px;
  background: var(--accent-muted); color: var(--accent);
}

.code-viewer {
  margin-top: 8px; border: 1px solid var(--border); border-radius: var(--radius-sm);
  overflow: hidden; background: var(--bg-code);
}
.code-viewer-header {
  display: flex; align-items: center; justify-content: space-between;
  padding: 5px 10px; background: #161b22; border-bottom: 1px solid var(--border-light);
}
.code-viewer-header span { font-size: 11px; color: var(--text-muted); font-weight: 500; }
.code-viewer-actions { display: flex; gap: 4px; }
.code-viewer-header button, .code-viewer-actions button {
  padding: 3px 8px; border: 1px solid var(--border); border-radius: 5px;
  background: transparent; color: var(--text-secondary); font-size: 10px;
  font-family: var(--font); cursor: pointer;
  transition: background var(--transition-fast), color var(--transition-fast);
}
.code-viewer-header button:hover, .code-viewer-actions button:hover { background: var(--accent-muted); color: var(--accent); }
.code-viewer-delete:hover { background: rgba(249,68,56,0.15) !important; color: #F04438 !important; border-color: #F04438 !important; }
.code-viewer pre {
  margin: 0; padding: 10px; font-family: var(--font-mono); font-size: 11px;
  line-height: 1.45; overflow: auto; max-height: 180px; color: var(--text);
  white-space: pre; background: #0d1117;
}

.code-panel-empty {
  padding: 20px 12px; text-align: center; color: var(--text-muted); font-size: 12px;
}

/* ── Features Panel (bottom half) ── */
.features-panel {
  flex: 1; display: flex; flex-direction: column; min-height: 0; overflow: hidden;
}

.features-tabs {
  display: flex; border-bottom: 1px solid var(--border); flex-shrink: 0;
  background: rgba(14, 17, 23, 0.5);
}
.features-tab {
  flex: 1; padding: 9px 6px; border: none; border-bottom: 2px solid transparent;
  background: transparent; color: var(--text-muted); font-family: var(--font);
  font-size: 11.5px; font-weight: 500; cursor: pointer; text-align: center;
  transition: all var(--transition-fast);
}
.features-tab:hover { color: var(--text-secondary); background: var(--bg-hover); }
.features-tab.active {
  color: #B692F6; border-bottom-color: #7F56D9;
  background: rgba(127, 86, 217, 0.05);
}

.features-body { flex: 1; overflow-y: auto; padding: 12px; min-height: 0; }
.features-body::-webkit-scrollbar { width: 5px; }
.features-body::-webkit-scrollbar-track { background: transparent; }
.features-body::-webkit-scrollbar-thumb { background: var(--border); border-radius: 3px; }

/* ── Shortcut hint ── */
.shortcut-hint {
  font-size: 11px; color: var(--text-muted); margin-bottom: 12px;
  padding: 7px 10px; background: rgba(127, 86, 217, 0.06);
  border-radius: var(--radius-sm);
  border-left: 3px solid var(--accent); line-height: 1.4;
}

/* ── Shortcut button grid ── */
.shortcut-group { margin-bottom: 14px; }
.shortcut-group-label {
  font-size: 10.5px; font-weight: 600; color: var(--text-secondary);
  text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 6px;
}
.shortcut-grid {
  display: flex; flex-wrap: wrap; gap: 5px;
}
.shortcut-btn {
  padding: 6px 12px; border: 1px solid var(--border); border-radius: 20px;
  background: var(--surface); color: var(--text-secondary);
  font-family: var(--font); font-size: 11px; font-weight: 500;
  cursor: pointer; white-space: nowrap;
  transition: all var(--transition-fast);
}
.shortcut-btn:hover:not(:disabled) {
  background: rgba(127, 86, 217, 0.1); border-color: rgba(127, 86, 217, 0.4);
  color: #B692F6; transform: translateY(-1px);
  box-shadow: 0 2px 8px rgba(127, 86, 217, 0.1);
}
.shortcut-btn:active:not(:disabled) { transform: translateY(0); }
.shortcut-btn:disabled { opacity: 0.35; cursor: not-allowed; }

/* Feature elements (reused in Variants tab) */
.feature-section { margin-bottom: 12px; }
.feature-label { font-size: 11.5px; font-weight: 500; color: var(--text-secondary); margin-bottom: 5px; }
.feature-row { display: flex; gap: 6px; margin-top: 6px; align-items: center; flex-wrap: wrap; }

.feature-btn {
  padding: 7px 14px; border: none; border-radius: var(--radius-sm);
  font-family: var(--font); font-size: 12px; font-weight: 500;
  cursor: pointer; transition: background var(--transition-fast), opacity var(--transition-fast);
}
.feature-btn:disabled { opacity: 0.5; cursor: not-allowed; }
.feature-btn-primary {
  background: linear-gradient(135deg, #6941C6 0%, #7F56D9 100%); color: white;
  box-shadow: 0 1px 4px rgba(127, 86, 217, 0.25);
}
.feature-btn-primary:hover:not(:disabled) {
  background: linear-gradient(135deg, #7F56D9 0%, #9E77ED 100%);
  box-shadow: 0 2px 8px rgba(127, 86, 217, 0.35);
}

/* Variant keywords */
.variant-keyword-row { display: flex; gap: 6px; margin-top: 6px; align-items: center; }
.variant-keyword-row label { font-size: 11px; color: var(--text-muted); min-width: 30px; }
.variant-keyword-row input {
  flex: 1; padding: 5px 8px; border: 1px solid var(--border); border-radius: 5px;
  background: var(--bg-input); color: var(--text); font-size: 11.5px; outline: none;
  transition: border-color var(--transition);
}
.variant-keyword-row input:focus { border-color: var(--accent); }

/* Catalog list */
.catalog-mini-list { display: flex; flex-direction: column; gap: 5px; }
.catalog-mini-item {
  padding: 8px 12px; border: 1px solid var(--border-light); border-radius: var(--radius);
  background: var(--surface); font-size: 12px;
  transition: all var(--transition-fast);
}
.catalog-mini-item:hover { border-color: var(--border); background: var(--bg-hover); box-shadow: var(--shadow-xs); }
.catalog-mini-item.clickable { cursor: pointer; }
.catalog-mini-item.clickable:hover {
  border-color: rgba(127, 86, 217, 0.3); background: rgba(127, 86, 217, 0.06);
  box-shadow: 0 1px 4px rgba(127, 86, 217, 0.08);
}
.catalog-mini-name { font-weight: 500; color: var(--text); }
.catalog-mini-path { font-size: 10px; color: var(--accent); font-family: var(--font-mono); word-break: break-all; margin-top: 2px; }
.catalog-mini-desc { font-size: 10.5px; color: var(--text-muted); margin-top: 2px; }

/* Spinner */
.spinner {
  display: inline-block; width: 14px; height: 14px; border: 2px solid var(--border);
  border-top-color: var(--accent); border-radius: 50%;
  animation: spin 0.6s linear infinite; vertical-align: middle; margin-right: 5px;
}
@keyframes spin { to { transform: rotate(360deg); } }

/* ══════════════════════════════════════
   Toast
   ══════════════════════════════════════ */

.toast-container { position: fixed; top: 16px; right: 16px; z-index: 1000; display: flex; flex-direction: column; gap: 8px; }
.toast {
  padding: 12px 18px; border-radius: var(--radius); font-size: 13px;
  background: rgba(24, 29, 39, 0.95); backdrop-filter: blur(12px);
  border: 1px solid var(--border); color: var(--text);
  box-shadow: var(--shadow-xl); animation: toast-in 0.3s cubic-bezier(0.4, 0, 0.2, 1); max-width: 340px;
}
.toast.error { border-color: rgba(240, 68, 56, 0.4); color: #FDA29B; }
.toast.success { border-color: rgba(23, 178, 106, 0.4); color: #75E0A7; }
@keyframes toast-in { from { opacity: 0; transform: translateX(20px); } to { opacity: 1; transform: translateX(0); } }

/* ══════════════════════════════════════
   Mobile Responsive
   ══════════════════════════════════════ */

@media (max-width: 768px) {
  .sidebar {
    position: fixed; top: 0; left: 0; bottom: 0;
    transform: translateX(-100%); z-index: 200; box-shadow: var(--shadow-lg);
  }
  .sidebar.open { transform: translateX(0); }
  .sidebar-overlay {
    position: fixed; inset: 0; background: rgba(0,0,0,0.6); z-index: 199;
    animation: fade-in 0.2s ease;
  }
  @keyframes fade-in { from { opacity: 0; } to { opacity: 1; } }
  .right-panel, .resize-handle { display: none !important; }
  .messages-container { padding: 12px 12px 0; }
  .input-area { padding: 10px 12px 14px; }
  .suggestions-grid { grid-template-columns: 1fr; }
  .welcome-title { font-size: 18px; }
}

@media (min-width: 769px) {
  .sidebar.hidden-desktop { width: 0; min-width: 0; padding: 0; border: none; overflow: hidden; }
}

/* ══════════════════════════════════════
   Utility
   ══════════════════════════════════════ */

.sr-only {
  position: absolute; width: 1px; height: 1px; padding: 0; margin: -1px;
  overflow: hidden; clip: rect(0,0,0,0); white-space: nowrap; border: 0;
}
.markdown-content img { max-width: 100%; height: auto; border-radius: var(--radius-sm); }
::selection { background: rgba(127, 86, 217, 0.25); color: var(--text); }

/* ══════════════════════════════════════
   Agent Pipeline Visualization
   ══════════════════════════════════════ */

.agent-pipeline {
  padding: 16px 20px;
  background: linear-gradient(180deg, rgba(14, 17, 23, 0.95) 0%, rgba(19, 23, 32, 0.9) 100%);
  border-bottom: 1px solid var(--border-light);
  animation: pipeline-slide-in 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  overflow: hidden;
}
@keyframes pipeline-slide-in {
  from { max-height: 0; opacity: 0; padding: 0 20px; }
  to { max-height: 130px; opacity: 1; }
}

.agent-pipeline-label {
  font-size: 9.5px;
  font-weight: 600;
  color: var(--text-muted);
  text-transform: uppercase;
  letter-spacing: 0.08em;
  margin-bottom: 12px;
  display: flex;
  align-items: center;
  gap: 7px;
}
.agent-pipeline-label .pipeline-dot {
  width: 7px; height: 7px; border-radius: 50%;
  background: var(--accent);
  animation: pipeline-pulse 1.5s ease-in-out infinite;
}
@keyframes pipeline-pulse {
  0%, 100% { opacity: 0.4; transform: scale(1); }
  50% { opacity: 1; transform: scale(1.4); }
}

.agent-pipeline-track {
  display: flex;
  align-items: center;
  gap: 0;
  max-width: 680px;
  margin: 0 auto;
}

.agent-node {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 6px;
  min-width: 76px;
  position: relative;
}

.agent-node-circle {
  width: 36px; height: 36px;
  border-radius: 12px;
  display: flex; align-items: center; justify-content: center;
  font-size: 14px;
  border: 2px solid var(--border);
  background: var(--surface);
  color: var(--text-muted);
  transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  z-index: 2;
}

.agent-node-label {
  font-size: 10px;
  font-weight: 500;
  color: var(--text-muted);
  white-space: nowrap;
  transition: color 0.3s ease;
}

/* Pending state */
.agent-node.pending .agent-node-circle {
  border-color: var(--border);
  background: var(--surface);
  color: var(--text-muted);
}

/* Active state */
.agent-node.active .agent-node-circle {
  border-color: #9E77ED;
  background: rgba(127, 86, 217, 0.15);
  color: #B692F6;
  box-shadow: 0 0 20px rgba(127, 86, 217, 0.35), 0 0 6px rgba(127, 86, 217, 0.15);
  animation: agent-active-pulse 2s ease-in-out infinite;
}
.agent-node.active .agent-node-label {
  color: #B692F6;
  font-weight: 600;
}
@keyframes agent-active-pulse {
  0%, 100% { box-shadow: 0 0 12px rgba(127, 86, 217, 0.25); }
  50% { box-shadow: 0 0 28px rgba(127, 86, 217, 0.4), 0 0 8px rgba(127, 86, 217, 0.15); }
}

/* Complete state */
.agent-node.complete .agent-node-circle {
  border-color: #17B26A;
  background: rgba(23, 178, 106, 0.12);
  color: #17B26A;
}
.agent-node.complete .agent-node-label {
  color: #17B26A;
}

/* Skipped state */
.agent-node.skipped .agent-node-circle {
  border-color: var(--border);
  background: transparent;
  color: var(--text-muted);
  opacity: 0.35;
}
.agent-node.skipped .agent-node-label {
  opacity: 0.35;
}

/* Connector between nodes */
.agent-connector {
  flex: 1;
  height: 3px;
  background: var(--border);
  position: relative;
  min-width: 20px;
  border-radius: 2px;
  transition: background 0.5s cubic-bezier(0.4, 0, 0.2, 1);
}
.agent-connector.complete {
  background: linear-gradient(90deg, #079455, #17B26A);
}
.agent-connector.active {
  background: linear-gradient(90deg, #17B26A 0%, #7F56D9 60%, #9E77ED 100%);
  background-size: 200% 100%;
  animation: connector-flow 2s ease infinite;
}
@keyframes connector-flow {
  0% { background-position: 100% 0; }
  100% { background-position: 0 0; }
}

/* Status message below pipeline */
.agent-status-text {
  text-align: center;
  font-size: 11.5px;
  color: var(--text-secondary);
  margin-top: 10px;
  min-height: 16px;
  animation: status-fade 0.3s ease;
}
@keyframes status-fade {
  from { opacity: 0; transform: translateY(-4px); }
  to { opacity: 1; transform: translateY(0); }
}

/* Mode badge variants */
.header-model-badge.langgraph {
  background: rgba(23, 178, 106, 0.12);
  color: #47CD89;
}
.header-model-badge.direct {
  background: var(--accent-muted);
  color: var(--accent);
}

/* ══════════════════════════════════════
   Thinking Bar (collapsible, like Cursor)
   ══════════════════════════════════════ */

.thinking-bar {
  margin-bottom: 12px;
  border: 1px solid var(--border);
  border-radius: var(--radius);
  overflow: hidden;
  background: rgba(14, 17, 23, 0.6);
  backdrop-filter: blur(8px);
  transition: all 0.3s ease;
}
.thinking-bar.active {
  border-color: rgba(127, 86, 217, 0.4);
  box-shadow: 0 0 0 1px rgba(127, 86, 217, 0.1), 0 2px 12px rgba(127, 86, 217, 0.06);
}
.thinking-bar-header {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px 14px;
  cursor: pointer;
  font-size: 12px;
  color: var(--text-muted);
  user-select: none;
  transition: background 0.15s ease;
}
.thinking-bar-header:hover {
  background: var(--bg-hover);
}
.thinking-dot {
  width: 7px;
  height: 7px;
  border-radius: 50%;
  background: var(--text-muted);
  flex-shrink: 0;
  transition: background 0.3s ease;
}
.thinking-dot.active {
  background: #9E77ED;
  animation: thinking-pulse 1.5s ease-in-out infinite;
}
@keyframes thinking-pulse {
  0%, 100% { opacity: 1; transform: scale(1); }
  50% { opacity: 0.5; transform: scale(0.8); }
}
.thinking-label-group {
  flex: 1; display: flex; flex-direction: column; gap: 2px; min-width: 0;
}
.thinking-label {
  font-weight: 500;
  letter-spacing: 0.01em;
}
.thinking-summary {
  font-size: 11px; color: var(--text-muted); font-weight: 400;
  white-space: nowrap; overflow: hidden; text-overflow: ellipsis;
  line-height: 1.3; opacity: 0.85;
}
.thinking-toggle {
  font-size: 10px;
  color: var(--text-muted);
  opacity: 0.6;
}
.thinking-bar-content {
  padding: 10px 14px;
  border-top: 1px solid var(--border);
  font-size: 12px;
  line-height: 1.6;
  max-height: 280px;
  overflow-y: auto;
  color: var(--text-secondary);
  background: rgba(0, 0, 0, 0.15);
}
.thinking-bar-content .markdown-content {
  font-size: 12px;
  line-height: 1.6;
}
.thinking-bar-content .markdown-content p {
  margin: 4px 0;
}
.thinking-bar-content .markdown-content strong {
  color: var(--text);
}
.thinking-bar-content::-webkit-scrollbar {
  width: 4px;
}
.thinking-bar-content::-webkit-scrollbar-track {
  background: transparent;
}
.thinking-bar-content::-webkit-scrollbar-thumb {
  background: var(--border);
  border-radius: 2px;
}

/* ── Code file rename ── */
.code-file-rename-input {
  background: var(--bg-secondary);
  border: 1px solid var(--accent);
  color: var(--text);
  font-size: 12px;
  padding: 2px 6px;
  border-radius: 4px;
  width: 100%;
  outline: none;
  font-family: inherit;
}
.code-file-rename-btn {
  background: none; border: none; cursor: pointer;
  color: var(--text-muted); font-size: 12px; padding: 2px;
  opacity: 0;
  transition: opacity 0.15s;
}
.code-file-item:hover .code-file-rename-btn { opacity: 0.7; }
.code-file-rename-btn:hover { opacity: 1 !important; color: var(--accent); }

/* ── Library badge in code file list ── */
.code-file-lib {
  display: inline-block;
  font-size: 9px;
  font-weight: 600;
  padding: 0 5px;
  border-radius: 9999px;
  margin-left: 6px;
  vertical-align: middle;
  letter-spacing: 0.3px;
}
.code-file-lib.untitledui { background: rgba(21,112,239,0.12); color: #1570EF; }
.code-file-lib.metafore { background: rgba(127,86,217,0.12); color: #7F56D9; }
.code-file-lib.both { background: rgba(99,102,241,0.12); color: #6366F1; }

/* ── Library tag in sidebar conversation list ── */
.conv-lib-tag {
  display: inline-block;
  font-size: 9px;
  font-weight: 600;
  padding: 0 5px;
  border-radius: 9999px;
  margin-left: auto;
  margin-right: 4px;
  flex-shrink: 0;
  letter-spacing: 0.3px;
}
.conv-lib-tag.untitledui { background: rgba(21,112,239,0.12); color: #1570EF; }
.conv-lib-tag.metafore { background: rgba(127,86,217,0.12); color: #7F56D9; }
.conv-lib-tag.both { background: rgba(99,102,241,0.12); color: #6366F1; }

/* ══════════════════════════════════════════════════════════
   Theme Toggle
   ══════════════════════════════════════════════════════════ */

.theme-toggle-btn {
  display: flex; align-items: center; gap: 8px; width: 100%;
  padding: 8px 10px; margin-bottom: 8px;
  border: none; border-radius: var(--radius);
  background: transparent; cursor: pointer;
  font-family: var(--font); font-size: 12px;
  transition: background var(--transition-fast);
}
.theme-toggle-btn:hover { background: var(--bg-hover); }

.theme-toggle-track {
  width: 40px; height: 22px; border-radius: 11px;
  position: relative; transition: background 0.3s ease;
  display: flex; align-items: center;
  flex-shrink: 0;
}
.theme-toggle-track.dark {
  background: linear-gradient(135deg, #6941C6 0%, #7F56D9 100%);
}
.theme-toggle-track.light {
  background: linear-gradient(135deg, #F79009 0%, #FDB022 100%);
}

.theme-toggle-thumb {
  width: 18px; height: 18px; border-radius: 50%;
  background: #fff;
  display: flex; align-items: center; justify-content: center;
  position: absolute; top: 2px;
  transition: left 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 1px 4px rgba(0,0,0,0.2);
}
.theme-toggle-track.dark .theme-toggle-thumb {
  left: 2px; color: #6941C6;
}
.theme-toggle-track.light .theme-toggle-thumb {
  left: 20px; color: #F79009;
}

.theme-toggle-label {
  font-weight: 500; color: var(--text-secondary);
  font-size: 12px;
}

/* ══════════════════════════════════════════════════════════
   LIGHT MODE — [data-theme="light"]
   ══════════════════════════════════════════════════════════ */

[data-theme="light"] {
  --bg: #FAFAFA;
  --bg-sidebar: #FFFFFF;
  --bg-chat: #F5F5F5;
  --bg-input: #FFFFFF;
  --bg-hover: #F0F0F2;
  --bg-active: #E9EAEB;
  --bg-code: #F9F9FB;
  --bg-right: #FFFFFF;

  --surface: #FFFFFF;
  --surface-hover: #F5F5F5;
  --surface-active: #E9EAEB;

  --border: #E9EAEB;
  --border-light: #F0F0F2;
  --border-focus: #7F56D9;

  --text: #181D27;
  --text-secondary: #535862;
  --text-muted: #717680;
  --text-placeholder: #A4A7AE;

  --accent: #7F56D9;
  --accent-hover: #6941C6;
  --accent-muted: rgba(127, 86, 217, 0.10);
  --accent-glow: rgba(127, 86, 217, 0.18);
  --accent-subtle: rgba(127, 86, 217, 0.05);

  --green: #079455;
  --green-muted: rgba(7, 148, 85, 0.08);
  --red: #D92D20;
  --red-muted: rgba(217, 45, 32, 0.08);
  --orange: #DC6803;
  --orange-muted: rgba(220, 104, 3, 0.08);

  --shadow-xs: 0 1px 2px rgba(10, 13, 18, 0.04);
  --shadow: 0 1px 3px rgba(10, 13, 18, 0.06), 0 1px 2px -1px rgba(10, 13, 18, 0.06);
  --shadow-md: 0 4px 6px -1px rgba(10, 13, 18, 0.06), 0 2px 4px -2px rgba(10, 13, 18, 0.04);
  --shadow-lg: 0 12px 16px -4px rgba(10, 13, 18, 0.06), 0 4px 6px -2px rgba(10, 13, 18, 0.02);
  --shadow-xl: 0 20px 24px -4px rgba(10, 13, 18, 0.06), 0 8px 8px -4px rgba(10, 13, 18, 0.02);
}

/* ── Light: Sidebar ── */
[data-theme="light"] .sidebar {
  background: linear-gradient(180deg, #FFFFFF 0%, #FAFAFA 100%);
  border-right: 1px solid var(--border);
}
[data-theme="light"] .library-selector-btns {
  background: #F5F5F5;
  border-color: var(--border);
}
[data-theme="light"] .new-chat-btn {
  background: rgba(127, 86, 217, 0.06);
  border-color: var(--border);
}
[data-theme="light"] .new-chat-btn:hover {
  background: rgba(127, 86, 217, 0.12);
  border-color: var(--accent);
}
[data-theme="light"] .conv-item:hover { background: #F5F5F5; }
[data-theme="light"] .conv-item.active {
  background: rgba(127, 86, 217, 0.08);
  border-left-color: var(--accent);
}
[data-theme="light"] .sidebar-footer {
  border-top-color: var(--border);
  background: linear-gradient(180deg, transparent 0%, rgba(127, 86, 217, 0.03) 100%);
}
[data-theme="light"] .conv-item-delete:hover { background: rgba(217, 45, 32, 0.08); }

/* ── Light: Chat Area ── */
[data-theme="light"] .chat-main {
  background: linear-gradient(180deg, #F9F5FF 0%, #F5F5F5 30%, #FAFAFA 100%);
}
[data-theme="light"] .chat-header {
  background: rgba(255, 255, 255, 0.85);
  backdrop-filter: blur(16px);
  border-bottom-color: var(--border);
}
[data-theme="light"] .sidebar-toggle-btn:hover,
[data-theme="light"] .right-panel-toggle-btn:hover {
  background: #F0F0F2;
}

/* ── Light: Messages ── */
[data-theme="light"] .message.user {
  background: rgba(127, 86, 217, 0.05);
  border-left-color: rgba(127, 86, 217, 0.35);
}
[data-theme="light"] .message.assistant {
  background: rgba(7, 148, 85, 0.04);
}
[data-theme="light"] .message.user .msg-avatar {
  box-shadow: 0 2px 8px rgba(105, 65, 198, 0.2);
}
[data-theme="light"] .message.assistant .msg-avatar {
  box-shadow: 0 2px 8px rgba(7, 148, 85, 0.2);
}

/* ── Light: Markdown / Code ── */
[data-theme="light"] .markdown-content code:not(pre code) {
  background: #F4EBFF;
  color: #53389E;
  border-color: #E9D7FE;
}
[data-theme="light"] .code-block-wrapper {
  background: #FAFAFA;
  border-color: var(--border);
}
[data-theme="light"] .code-block-header {
  background: #F5F5F5;
  border-bottom-color: var(--border);
}
[data-theme="light"] .markdown-content pre {
  background: #FAFAFA;
  color: #181D27;
}
[data-theme="light"] .msg-code-pre {
  background: #FAFAFA;
  color: #181D27;
}
[data-theme="light"] .copy-code-btn:hover {
  background: rgba(0,0,0,0.06);
}

/* ── Light: Welcome Screen ── */
[data-theme="light"] .welcome-logo {
  box-shadow: 0 4px 24px rgba(127, 86, 217, 0.2), 0 0 0 1px rgba(127, 86, 217, 0.08);
}
[data-theme="light"] .suggestion-btn {
  background: #FFFFFF;
  border-color: var(--border);
  box-shadow: var(--shadow-xs);
}
[data-theme="light"] .suggestion-btn:hover {
  border-color: rgba(127, 86, 217, 0.4);
  background: rgba(127, 86, 217, 0.04);
  box-shadow: var(--shadow-md);
}

/* ── Light: Input Area ── */
[data-theme="light"] .input-area {
  background: linear-gradient(180deg, transparent 0%, rgba(249, 245, 255, 0.5) 100%);
}
[data-theme="light"] .input-box {
  background: rgba(255, 255, 255, 0.9);
  backdrop-filter: blur(16px);
  border-color: var(--border);
  box-shadow: var(--shadow);
}
[data-theme="light"] .input-box:focus-within {
  border-color: var(--accent);
  box-shadow: 0 0 0 3px rgba(127, 86, 217, 0.1), var(--shadow-md);
}
[data-theme="light"] .send-btn {
  box-shadow: 0 2px 8px rgba(127, 86, 217, 0.2);
}
[data-theme="light"] .send-btn:hover:not(:disabled) {
  box-shadow: 0 4px 14px rgba(127, 86, 217, 0.3);
}
[data-theme="light"] .pinned-context-bar {
  background: rgba(244, 235, 255, 0.6);
  border-color: rgba(127, 86, 217, 0.2);
}
[data-theme="light"] .pinned-context-label { color: #6941C6; }
[data-theme="light"] .pinned-context-chip {
  box-shadow: 0 1px 4px rgba(127, 86, 217, 0.15);
}

/* ── Light: Right Panel ── */
[data-theme="light"] .right-panel {
  background: linear-gradient(180deg, #FFFFFF 0%, #FAFAFA 100%);
  border-left-color: var(--border);
}
[data-theme="light"] .resize-handle {
  border-left-color: var(--border);
}
[data-theme="light"] .resize-handle:hover {
  background: rgba(127, 86, 217, 0.08);
}
[data-theme="light"] .code-panel-header {
  background: linear-gradient(90deg, rgba(127, 86, 217, 0.04) 0%, transparent 100%);
  border-bottom-color: var(--border);
}
[data-theme="light"] .code-file-item:hover {
  background: #F5F5F5;
  border-color: var(--border);
}
[data-theme="light"] .code-file-item.active {
  background: rgba(127, 86, 217, 0.06);
  border-color: rgba(127, 86, 217, 0.25);
}
[data-theme="light"] .code-viewer {
  background: #FAFAFA;
  border-color: var(--border);
}
[data-theme="light"] .code-viewer-header {
  background: #F5F5F5;
}
[data-theme="light"] .code-viewer pre {
  background: #FAFAFA;
  color: #181D27;
}

/* ── Light: Features Panel ── */
[data-theme="light"] .features-tabs {
  background: rgba(255, 255, 255, 0.5);
}
[data-theme="light"] .features-tab:hover {
  background: #F5F5F5;
}
[data-theme="light"] .features-tab.active {
  background: rgba(127, 86, 217, 0.05);
}
[data-theme="light"] .shortcut-btn {
  background: #FFFFFF;
  border-color: var(--border);
  box-shadow: var(--shadow-xs);
}
[data-theme="light"] .shortcut-btn:hover:not(:disabled) {
  background: rgba(127, 86, 217, 0.06);
  border-color: rgba(127, 86, 217, 0.3);
  box-shadow: var(--shadow);
}
[data-theme="light"] .catalog-mini-item {
  background: #FFFFFF;
  border-color: var(--border);
  box-shadow: var(--shadow-xs);
}
[data-theme="light"] .catalog-mini-item:hover {
  box-shadow: var(--shadow);
}

/* ── Light: Agent Pipeline ── */
[data-theme="light"] .agent-pipeline {
  background: linear-gradient(180deg, rgba(255, 255, 255, 0.95) 0%, rgba(249, 245, 255, 0.9) 100%);
  backdrop-filter: blur(12px);
  border-bottom-color: var(--border);
}
[data-theme="light"] .agent-node-circle {
  background: #FFFFFF;
  border-color: var(--border);
  box-shadow: var(--shadow-xs);
}
[data-theme="light"] .agent-node.active .agent-node-circle {
  background: rgba(127, 86, 217, 0.08);
  box-shadow: 0 0 16px rgba(127, 86, 217, 0.2), var(--shadow-xs);
}
[data-theme="light"] .agent-node.complete .agent-node-circle {
  background: rgba(7, 148, 85, 0.08);
}

/* ── Light: Thinking Bar ── */
[data-theme="light"] .thinking-bar {
  background: rgba(255, 255, 255, 0.8);
  backdrop-filter: blur(12px);
  border-color: var(--border);
}
[data-theme="light"] .thinking-bar.active {
  border-color: rgba(127, 86, 217, 0.3);
  box-shadow: 0 0 0 1px rgba(127, 86, 217, 0.06);
}
[data-theme="light"] .thinking-bar-header:hover {
  background: #F5F5F5;
}
[data-theme="light"] .thinking-bar-content {
  background: #FAFAFA;
}

/* ── Light: Toast ── */
[data-theme="light"] .toast {
  background: rgba(255, 255, 255, 0.95);
  backdrop-filter: blur(16px);
  border-color: var(--border);
  box-shadow: var(--shadow-xl);
  color: var(--text);
}
[data-theme="light"] .toast.error { border-color: rgba(217, 45, 32, 0.3); color: #B42318; }
[data-theme="light"] .toast.success { border-color: rgba(7, 148, 85, 0.3); color: #067647; }

/* ── Light: Preview Modal ── */
[data-theme="light"] .preview-modal-overlay {
  background: rgba(255, 255, 255, 0.75);
}
[data-theme="light"] .preview-modal {
  background: #FFFFFF;
  border-color: var(--border);
  box-shadow: var(--shadow-xl);
}
[data-theme="light"] .preview-modal-toolbar {
  background: linear-gradient(180deg, #FFFFFF 0%, #FAFAFA 100%);
  border-bottom-color: var(--border);
}
[data-theme="light"] .preview-modal-loading {
  background: #FFFFFF;
}
[data-theme="light"] .preview-modal-variant-label {
  background: #F5F5F5;
}

/* ── Light: Pinned Tags ── */
[data-theme="light"] .msg-pinned-tag {
  background: rgba(244, 235, 255, 0.8);
  color: #6941C6;
  border-color: rgba(127, 86, 217, 0.2);
}

/* ── Light: Preview Section ── */
[data-theme="light"] .msg-preview-section {
  background: #FFFFFF;
  border-color: var(--border);
  box-shadow: var(--shadow-xs);
}
[data-theme="light"] .msg-preview-header {
  background: #F9F9FB;
}
[data-theme="light"] .msg-preview-actions .expand-btn {
  background: rgba(127, 86, 217, 0.08);
  color: #6941C6;
  border-color: rgba(127, 86, 217, 0.25);
}

/* ── Light: Scrollbar ── */
[data-theme="light"] .conversations-list::-webkit-scrollbar-thumb,
[data-theme="light"] .messages-scroll::-webkit-scrollbar-thumb,
[data-theme="light"] .code-panel-body::-webkit-scrollbar-thumb,
[data-theme="light"] .features-body::-webkit-scrollbar-thumb {
  background: rgba(0, 0, 0, 0.12);
}
[data-theme="light"] .messages-scroll {
  scrollbar-color: rgba(0, 0, 0, 0.12) transparent;
}

/* ── Light: Selection ── */
[data-theme="light"] ::selection {
  background: rgba(127, 86, 217, 0.2);
  color: #181D27;
}

/* ── Light: Library badges ── */
[data-theme="light"] .code-file-lib.untitledui { background: rgba(21,112,239,0.08); color: #1570EF; }
[data-theme="light"] .code-file-lib.metafore { background: rgba(127,86,217,0.08); color: #6941C6; }
[data-theme="light"] .code-file-lib.both { background: rgba(99,102,241,0.08); color: #4F46E5; }
[data-theme="light"] .conv-lib-tag.untitledui { background: rgba(21,112,239,0.08); color: #1570EF; }
[data-theme="light"] .conv-lib-tag.metafore { background: rgba(127,86,217,0.08); color: #6941C6; }
[data-theme="light"] .conv-lib-tag.both { background: rgba(99,102,241,0.08); color: #4F46E5; }

/* ── Light: Header badges ── */
[data-theme="light"] .header-model-badge {
  background: rgba(127, 86, 217, 0.08);
  color: #6941C6;
}
[data-theme="light"] .header-model-badge.langgraph {
  background: rgba(7, 148, 85, 0.08);
  color: #067647;
}

/* ── Light: Rename input ── */
[data-theme="light"] .code-file-rename-input {
  background: #FFFFFF;
  border-color: var(--accent);
}

/* ── Light: Shortcut hint ── */
[data-theme="light"] .shortcut-hint {
  background: rgba(244, 235, 255, 0.5);
  border-left-color: var(--accent);
}

/* ── Light: Variant keyword input ── */
[data-theme="light"] .variant-keyword-row input {
  background: #FFFFFF;
  border-color: var(--border);
}

/* ── Light: Mobile sidebar overlay ── */
[data-theme="light"] .sidebar-overlay {
  background: rgba(0, 0, 0, 0.2);
}
